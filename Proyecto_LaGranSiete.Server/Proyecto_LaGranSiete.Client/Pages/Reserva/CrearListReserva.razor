@page "/Api/ListReserva/Crear"
@inject IHTTPServicio http
@inject NavigationManager navigationManager

@using System.ComponentModel.DataAnnotations 
@inject IJSRuntime JSRuntime


    
<!DOCTYPE html>

    <html>

        <head>
            <title>Lista de reservas</title>

            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        </head>

        <body class="p-3 mb-2 bg-black text-secondary">

            <header>

                @* <h1 class="text-center border-danger border border-0">Reservá tu lugar, completando los campos</h1> *@

                <div class="text-center my-4">
                    <h1 class="display-3 text-white bg-gradient p-4 rounded-pill shadow" style="background: linear-gradient(to right, #ff7e5f, #feb47b);">Reservá tu lugar</h1>
                    <div class="text-center my-4">
                        <p class="lead text-white bg-secondary p-4 rounded shadow text-uppercase" style="font-family: 'Arial Black', sans-serif; font-size: 2rem; background: rgba(255, 255, 255, 0.1); text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);">
                            Complejo deportivo la gran 7
                        </p>
                    </div>

                </div>



                @* <h3 >Completá con los datos requeridos para realizar la reserva</h3> *@

            </header>

            <main class="container mt-5">

                <EditForm Model="reserva" OnValidSubmit="Grabar">
                    <DataAnnotationsValidator />

                    <!-- Fecha y Hora de Reserva -->
                   @*  <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Fecha/Hora Reserva</label>
                        <div class="col-sm-9">
                            <input type="datetime-local" class="form-control" @bind-value="@reserva.FechaHoraReserva" />
                            <ValidationMessage For="@(() => reserva.FechaHoraReserva)" />
                        </div>
                    </div>
                   


                    <!-- Duración del Alquiler -->
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Tiempo de alquiler</label>
                        <div class="col-sm-9">
                            <input type="number" class="form-control" @bind-value="@reserva.DuracionAlquiler" />
                            <ValidationMessage For="@(() => reserva.DuracionAlquiler)" />
                        </div>
                    </div>

                    <!-- Monto o Precio -->
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Precio</label>
                        <div class="col-sm-9">
                            <input type="number" class="form-control" @bind-value="@reserva.Monto" />
                            <ValidationMessage For="@(() => reserva.Monto)" />
                        </div>
                    </div>

                    <!-- Método Pago -->
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Método Pago</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" @bind-value="@reserva.MetodoPago" />
                            <ValidationMessage For="@(() => reserva.MetodoPago)" />
                        </div>
                    </div>

                    <!-- Estado de la Reserva -->
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Estado de la reserva</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" @bind-value="@reserva.EstadoReserva" />
                            <ValidationMessage For="@(() => reserva.EstadoReserva)" />
                        </div>
                    </div>

                    <!-- Botón de Reservar -->
                        
                    <div class="text-center mt-4 d-flex justify-content-center">
                        
                        <button class="btn btn-lg btn-success bg-gradient 
                           
                            w-50 text-uppercase fs-5 fw-bold text-white 
                            shadow-lg border-0 rounded-pill" type="submit">
                            Reservar ahora
                        </button>
                    </div> *@

                    <div class="container mt-5">
                        <div class="row justify-content-center">
                            <div class="col-md-8 col-lg-6">
                                <div class="card shadow-lg border-0 rounded-lg">
                                    <div class="card-header bg-primary text-white text-center">
                                        <h3 class="font-weight-bold">Reservá tu lugar</h3>
                                        <p class="mb-0">Completando los campos</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Fecha/Hora Reserva</label>
                                            <div class="col-sm-9">
                                                <input type="datetime-local" class="form-control" @bind-value="@reserva.FechaHoraReserva" />
                                                <ValidationMessage For="@(() => reserva.FechaHoraReserva)" />
                                            </div>
                                        </div>

                                        <!-- Duración del Alquiler -->
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Tiempo de alquiler</label>
                                            <div class="col-sm-9">
                                                <input type="number" class="form-control" @bind-value="@reserva.DuracionAlquiler" />
                                                <ValidationMessage For="@(() => reserva.DuracionAlquiler)" />
                                            </div>
                                        </div>

                                        <!-- Monto o Precio -->
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Precio</label>
                                            <div class="col-sm-9">
                                                <input type="number" class="form-control" @bind-value="@reserva.Monto" />
                                                <ValidationMessage For="@(() => reserva.Monto)" />
                                            </div>
                                        </div>

                                        <!-- Método Pago -->
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Método Pago</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" @bind-value="@reserva.MetodoPago" />
                                                <ValidationMessage For="@(() => reserva.MetodoPago)" />
                                            </div>
                                        </div>

                                        <!-- Estado de la Reserva -->
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Estado de la reserva</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" @bind-value="@reserva.EstadoReserva" />
                                                <ValidationMessage For="@(() => reserva.EstadoReserva)" />
                                            </div>
                                        </div>

                                        <!-- Botón de Reservar -->
                                        <div class="text-center mt-4">
                                            <button class="btn btn-lg btn-success bg-gradient w-50 text-uppercase fs-5 fw-bold text-white shadow-lg border-0 rounded-pill" type="submit">
                                                Reservar ahora
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    @* boton de reserva, prueba de modificacón, (NO me gusta !!) *@

                   @*  <div class="text-center mt-4 d-flex justify-content-center align-items-center">
                        <button class="btn btn-lg btn-success bg-gradient w-50 text-uppercase fs-5 fw-bold text-white shadow-lg border-0 rounded-pill" type="submit">
                            Reservar ahora
                        </button>
                    </div> *@
                            

                </EditForm>

            </main>

            <footer>

            </footer>

             <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        </body>

    </html>

              

@code {

    private Reserva reserva = new Reserva();

    private async Task Grabar()
    {
        var httpRespuesta = await http.Post<Reserva>("Api/Reservas", reserva);

        if (httpRespuesta.Error)
        {
            var body = httpRespuesta.HttpResponseMessage;
        }
        navigationManager.NavigateTo("/Api/Reservas");
    }

    private void Cancelar()
    {
        navigationManager.NavigateTo("/Api/Reservas");
    }

   


}
            




     

